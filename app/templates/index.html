{% extends 'base.html' %}

{% block title %}学析优 - 初中生学习分析工具{% endblock %}

{% block content %}
<!-- 英雄区域 -->
<section class="bg-gradient-to-br from-primary to-primary/80 text-white py-20">
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 text-center">
        <h1 class="text-[clamp(2rem,5vw,3.5rem)] font-bold mb-6 text-shadow animate-fade-in">
            学析优 - 初中生学习分析助手
        </h1>
        <p class="text-[clamp(1rem,2vw,1.25rem)] max-w-2xl mx-auto mb-10 text-white/90 animate-slide-up">
            智能分析你的错题和成绩，发现学习短板，制定个性化提升方案，让学习更高效
        </p>
    </div>
</section>

<!-- 主要功能按钮 -->
<section class="section">
    <div class="grid grid-cols-1 md:grid-cols-2 gap-8">
        <!-- 上传错题按钮 -->
        <div class="card card-hover group relative overflow-hidden">
            <div class="absolute inset-0 bg-gradient-to-r from-primary/90 to-primary transition-all duration-500 group-hover:from-primary group-hover:to-primary/70"></div>
            <div class="relative p-8 z-10 h-full flex flex-col">
                <div class="mb-6 text-white/90">
                    <i class="fa fa-upload text-5xl mb-4 transform transition-transform duration-500 group-hover:scale-110"></i>
                    <h2 class="text-2xl font-bold mb-2">上传错题</h2>
                    <p>轻松上传错题图片或PDF，智能识别内容，分类整理你的错题集</p>
                </div>
                <div class="mt-auto">
                    <a href="{{ url_for('main.upload_question') }}" class="inline-block bg-white text-primary px-6 py-3 rounded-lg font-medium transition-all duration-300 hover:bg-gray-100 hover:shadow-lg">
                        开始上传 <i class="fa fa-arrow-right ml-2"></i>
                    </a>
                </div>
            </div>
        </div>

        <!-- 成绩分析按钮 -->
        <div class="card card-hover group relative overflow-hidden">
            <div class="absolute inset-0 bg-gradient-to-r from-secondary/90 to-secondary transition-all duration-500 group-hover:from-secondary group-hover:to-secondary/70"></div>
            <div class="relative p-8 z-10 h-full flex flex-col">
                <div class="mb-6 text-white/90">
                    <i class="fa fa-line-chart text-5xl mb-4 transform transition-transform duration-500 group-hover:scale-110"></i>
                    <h2 class="text-2xl font-bold mb-2">成绩分析</h2>
                    <p>导入考试成绩，结合错题数据，生成多维度分析报告和提升建议</p>
                </div>
                <div class="mt-auto">
                    <a href="{{ url_for('main.grade_analysis') }}" class="inline-block bg-white text-secondary px-6 py-3 rounded-lg font-medium transition-all duration-300 hover:bg-gray-100 hover:shadow-lg">
                        开始分析 <i class="fa fa-arrow-right ml-2"></i>
                    </a>
                </div>
            </div>
        </div>
    </div>
</section>

<!-- 历史数据区域 -->
<section class="section bg-gray-50">
    <h2 class="text-3xl font-bold mb-8 text-center">历史数据</h2>
    
    <div class="grid grid-cols-1 lg:grid-cols-2 gap-8">
        <!-- 历史错题清单 -->
        <div class="card">
            <div class="p-6 border-b border-gray-100">
                <h3 class="text-xl font-bold flex items-center">
                    <i class="fa fa-book text-primary mr-2"></i> 历史错题清单
                </h3>
            </div>
            <div class="p-6">
                {% if recent_questions %}
                    <div class="overflow-x-auto">
                        <table class="min-w-full divide-y divide-gray-200">
                            <thead>
                                <tr>
                                    <th class="px-4 py-3 bg-gray-50 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">文件名</th>
                                    <th class="px-4 py-3 bg-gray-50 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">科目</th>
                                    <th class="px-4 py-3 bg-gray-50 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">上传时间</th>
                                    <th class="px-4 py-3 bg-gray-50 text-right text-xs font-medium text-gray-500 uppercase tracking-wider">操作</th>
                                </tr>
                            </thead>
                            <tbody class="bg-white divide-y divide-gray-200">
                                {% for question in recent_questions %}
                                <tr class="hover:bg-gray-50 transition-colors">
                                    <td class="px-4 py-4 whitespace-nowrap text-sm text-gray-900">{{ question.filename }}</td>
                                    <td class="px-4 py-4 whitespace-nowrap text-sm text-gray-500">{{ question.subject or '未分类' }}</td>
                                    <td class="px-4 py-4 whitespace-nowrap text-sm text-gray-500">{{ question.upload_time.strftime('%Y-%m-%d') }}</td>
                                    <td class="px-4 py-4 whitespace-nowrap text-right text-sm font-medium">
                                        <a href="{{ url_for('main.view_question', question_id=question.id) }}" 
                                           class="text-primary hover:text-primary/80 transition-colors"
                                           data-new-window>
                                            查看
                                        </a>
                                    </td>
                                </tr>
                                {% endfor %}
                            </tbody>
                        </table>
                    </div>
                    <div class="mt-4 text-right">
                        <a href="{{ url_for('main.error_questions') }}" class="text-primary hover:text-primary/80 transition-colors">
                            查看全部 <i class="fa fa-angle-right ml-1"></i>
                        </a>
                    </div>
                {% else %}
                    <div class="text-center py-10 text-gray-500">
                        <i class="fa fa-file-text-o text-4xl mb-3 opacity-30"></i>
                        <p>暂无错题记录，点击上方"上传错题"开始添加</p>
                    </div>
                {% endif %}
            </div>
        </div>

        <!-- 历史分析结果 -->
        <div class="card">
            <div class="p-6 border-b border-gray-100">
                <h3 class="text-xl font-bold flex items-center">
                    <i class="fa fa-bar-chart text-secondary mr-2"></i> 历史分析结果
                </h3>
            </div>
            <div class="p-6">
                {% if recent_analyses %}
                    <div class="overflow-x-auto">
                        <table class="min-w-full divide-y divide-gray-200">
                            <thead>
                                <tr>
                                    <th class="px-4 py-3 bg-gray-50 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">标题</th>
                                    <th class="px-4 py-3 bg-gray-50 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">创建时间</th>
                                    <th class="px-4 py-3 bg-gray-50 text-right text-xs font-medium text-gray-500 uppercase tracking-wider">操作</th>
                                </tr>
                            </thead>
                            <tbody class="bg-white divide-y divide-gray-200">
                                {% for analysis in recent_analyses %}
                                <tr class="hover:bg-gray-50 transition-colors">
                                    <td class="px-4 py-4 whitespace-nowrap text-sm text-gray-900">{{ analysis.title }}</td>
                                    <td class="px-4 py-4 whitespace-nowrap text-sm text-gray-500">{{ analysis.create_time.strftime('%Y-%m-%d %H:%M') }}</td>
                                    <td class="px-4 py-4 whitespace-nowrap text-right text-sm font-medium">
                                        <a href="{{ url_for('main.view_analysis', analysis_id=analysis.id) }}" 
                                           class="text-secondary hover:text-secondary/80 transition-colors"
                                           data-new-window>
                                            查看
                                        </a>
                                    </td>
                                </tr>
                                {% endfor %}
                            </tbody>
                        </table>
                    </div>
                    <div class="mt-4 text-right">
                        <a href="{{ url_for('main.analysis_results') }}" class="text-secondary hover:text-secondary/80 transition-colors">
                            查看全部 <i class="fa fa-angle-right ml-1"></i>
                        </a>
                    </div>
                {% else %}
                    <div class="text-center py-10 text-gray-500">
                        <i class="fa fa-pie-chart text-4xl mb-3 opacity-30"></i>
                        <p>暂无分析记录，点击上方"成绩分析"开始生成</p>
                    </div>
                {% endif %}
            </div>
        </div>
    </div>
</section>

<!-- 功能特点 -->
<section class="section">
    <h2 class="text-3xl font-bold mb-12 text-center">功能特点</h2>
    
    <div class="grid grid-cols-1 md:grid-cols-3 gap-8">
        <div class="card p-6 text-center card-hover">
            <div class="w-16 h-16 bg-primary/10 rounded-full flex items-center justify-center mx-auto mb-4">
                <i class="fa fa-ocr text-2xl text-primary"></i>
            </div>
            <h3 class="text-xl font-bold mb-3">智能识别</h3>
            <p class="text-gray-600">自动识别图片和PDF中的错题内容，减少手动输入的麻烦</p>
        </div>
        
        <div class="card p-6 text-center card-hover">
            <div class="w-16 h-16 bg-secondary/10 rounded-full flex items-center justify-center mx-auto mb-4">
                <i class="fa fa-brain text-2xl text-secondary"></i>
            </div>
            <h3 class="text-xl font-bold mb-3">AI分析</h3>
            <p class="text-gray-600">基于人工智能的深度分析，发现学习弱点，提供个性化建议</p>
        </div>
        
        <div class="card p-6 text-center card-hover">
            <div class="w-16 h-16 bg-accent/10 rounded-full flex items-center justify-center mx-auto mb-4">
                <i class="fa fa-chart-line text-2xl text-accent"></i>
            </div>
            <h3 class="text-xl font-bold mb-3">可视化报告</h3>
            <p class="text-gray-600">直观的图表展示学习趋势和成绩变化，让进步一目了然</p>
        </div>
    </div>
</section>
{% endblock %}
